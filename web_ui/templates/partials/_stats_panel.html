<div class="stats-horizontal fadeInUp" role="region" aria-label="System Statistics">

  <!-- ðŸŽ¬ Volume -->
  <div class="stat-block">
    <h4>ðŸŽ¬ Volume</h4>
    <p>Movies: <strong>{{ movie_count }}</strong></p>
    <p>TV Series: <strong>{{ series_count }}</strong></p>
  </div>

  <!-- ðŸ“ˆ Updates -->
  <div class="stat-block">
    <h4>ðŸ“ˆ Updates</h4>
    <p>Last: <span class="timestamp">
        {{ last_update.strftime('%d/%m/%y, %H:%M:%S') if last_update else 'Never updated' }}
      </span></p>
    <p>Updates in last 7 days: <span class="count">{{ recent_updates }}</span></p>
    <p>Title: <strong>{{ most_updated_title.most_updated_title }}</strong> ({{ most_updated_title.title_type }}) Count:
      {{ most_updated_title.title_changes }}</p>
  </div>

  <!-- ðŸ§ª Freshness -->
  <div class="stat-block">
    <h4>ðŸ§ª Freshness</h4>
    <p><span class="badge fresh">Fresh</span>: {{ stats.freshness.fresh }}</p>
    <p><span class="badge moderate">Moderate</span>: {{ stats.freshness.moderate }}</p>
    <p><span class="badge stale">Stale</span>: {{ stats.freshness.stale }}</p>
  </div>

  <!-- ðŸ”§ Top Fields -->
  <div class="stat-block">
    <h4>ðŸ”§ Top Fields</h4>
    {% for item in top_fields %}
    <p>{{ item.field_name }} <span class="badge badge-secondary">{{ item.freq }}</span></p>
    {% endfor %}
  </div>

  <!-- ðŸ§¹ Quality -->
  <div class="stat-block">
    <h4>ðŸ§¹ Quality</h4>
    <p>Orphaned Logs: <strong>{{ orphaned_logs.orphaned_logs | default(0) }}</strong></p>

    <h4>Movies Missing Key Fields</h4>
    <a href="{{ url_for('missing_movies', field='missing_overview') }}" class="badge">
      Missing Overview: {{ movies_missing_fields.missing_overview }}</a>
    <a href="{{ url_for('missing_movies', field='missing_release_date') }}" class="badge">
      Missing Release Date: {{ movies_missing_fields.missing_release_date }}</a>
    <a href="{{ url_for('missing_movies', field='missing_runtime') }}" class="badge">
      Missing Runtime: {{ movies_missing_fields.missing_runtime }}</a>
    <a href="{{ url_for('missing_movies', field='missing_poster_path') }}" class="badge">
      Missing Poster: {{ movies_missing_fields.missing_poster_path }}</a>
    <a href="{{ url_for('missing_movies', field='missing_original_language') }}" class="badge">
      Missing Language: {{ movies_missing_fields.missing_original_language }}</a>
    <a href="{{ url_for('missing_movies', field='missing_status') }}" class="badge">
      Missing Status: {{ movies_missing_fields.missing_status }}</a>
    <a href="{{ url_for('missing_movies', field='missing_imdb') }}" class="badge">
      Missing IMDb ID: {{ movies_missing_fields.missing_imdb }}</a>
    <a href="{{ url_for('missing_movies', field='missing_budget') }}" class="badge">
      Missing Budget: {{ movies_missing_fields.missing_budget }}</a>
    <a href="{{ url_for('missing_movies', field='missing_revenue') }}" class="badge">
      Missing Revenue: {{ movies_missing_fields.missing_revenue }}</a>

    <h4>Series Missing Key Fields</h4>
    <a href="{{ url_for('missing_tv', field='missing_overview') }}" class="badge">
      Missing Overview: {{ series_missing_fields.missing_overview }}</a>
    <a href="{{ url_for('missing_tv', field='missing_first_air_date') }}" class="badge">
      Missing First Air Date: {{ series_missing_fields.missing_first_air_date }}</a>
    <a href="{{ url_for('missing_tv', field='missing_poster_path') }}" class="badge">
      Missing Poster: {{ series_missing_fields.missing_poster_path }}</a>
    <a href="{{ url_for('missing_tv', field='missing_original_language') }}" class="badge">
      Missing Language: {{ series_missing_fields.missing_original_language }}</a>
    <a href="{{ url_for('missing_tv', field='missing_status') }}" class="badge">
      Missing Status: {{ series_missing_fields.missing_status }}</a>
    <a href="{{ url_for('missing_tv', field='missing_imdb') }}" class="badge">
      Missing IMDb ID: {{ series_missing_fields.missing_imdb }}</a>
    <a href="{{ url_for('missing_tv', field='missing_seasons') }}" class="badge">
      Missing Seasons: {{ series_missing_fields.missing_seasons }}</a>
    <a href="{{ url_for('missing_tv', field='missing_episodes') }}" class="badge">
      Missing Episodes {{ series_missing_fields.missing_episodes }}</a>
  </div>
</div>