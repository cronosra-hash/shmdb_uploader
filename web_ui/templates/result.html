{% extends "base.html" %}

{% block title %}Upload Result{% endblock %}
{% block header %}Upload Result{% endblock %}

{% block subheader %}
  <h2 class="upload-message">{{ message }}</h2>
{% endblock %}

{% block content %}
  <a href="{{ url_for('read_root') }}" class="back-button">‚Üê Back to Index</a>

  {% if changes %}
  <table>
    <thead>
      <tr>
        <th>Logged At</th>
        <th>Update Type</th>
        <th>Field</th>
        <th>Previous</th>
        <th>Current</th>
      </tr>
    </thead>
    <tbody>
      {% for change in changes %}
        <tr style="--row-index: {{ loop.index0 }}">
          <td>{{ change["logged_at"] | datetimeformat }}</td>
          <td>
            <span class="update-type tooltip" data-tooltip="{{ change['update_type_detail'] }}">
              {{ change["update_type"] }}
            </span>
          </td>
          <td>
            <span class="tooltip" data-tooltip="{{ change['diagnostic'] }}">
              {{ change["updated_field"] }}
            </span>
          </td>
          <td>{{ change["previous_value"] }}</td>
          <td>{{ change["current_value"] }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No changes found.</p>
{% endif %}
{% endblock %}
